{
  "meta": {
    "project": "LeadLovers MCP Server",
    "date": "2025-09-11",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "LeadLovers MCP Server is an AI-First Model Context Protocol (MCP) server that integrates advanced AI capabilities with the LeadLovers CRM platform. It enhances CRM operations through natural language commands, offering intelligent automation for lead management, machine and email sequence operations, and more, providing users with a superpowered AI layer over traditional CRM workflows.",
  "core_goals": [
    "Enable seamless AI integration with LeadLovers CRM for enhanced lead and machine management.",
    "Provide robust and secure tools for creating and managing leads with comprehensive data validation.",
    "Support detailed retrieval of machines and email sequences with pagination and filtering to enhance CRM insights.",
    "Implement rigorous input validation, audit logging, and permission controls to ensure data integrity and security.",
    "Create an extensible MCP server architecture to support future AI-powered CRM functionalities like lead scoring and pipeline management."
  ],
  "key_features": [
    "Create Lead tool allowing users to add new leads with detailed attributes including name, email, machine code, and optional company and contact info, validated via Zod schemas.",
    "Get Machines API to retrieve a paginated list of machines with statistics such as views and leads counts.",
    "Get Machine Details API providing detailed information for a selected machine using its unique machine code.",
    "Get Email Sequences API to list available email sequences corresponding to a specific machine for marketing automation.",
    "Strict schema validation and error handling using Zod and TypeScript for reliability and security.",
    "Integration with AI services like OpenAI and Claude to enable intelligent command interpretation and automation.",
    "Extensive development workflow supporting hot reload, testing, linting, and building for high code quality.",
    "Support for environment configuration including authentication tokens and API keys for LeadLovers and AI services."
  ],
  "user_flow_summary": [
    "User issues a natural language command to create a lead, providing necessary lead information such as name, email, and machine association.",
    "The MCP server validates the input data using Zod schemas, then calls the LeadLovers API to create the lead.",
    "Upon successful creation, the server returns a structured confirmation response to the user.",
    "User requests a list of machines associated with their LeadLovers account, optionally specifying pagination parameters.",
    "Server retrieves the machine list from LeadLovers API and returns paginated results including machine codes, names, images, views, and leads statistics.",
    "User selects a specific machine by its code to retrieve detailed information, which the server validates and fetches from the API.",
    "User can query email sequences linked to a particular machine, receiving an organized list of sequence codes and names.",
    "All operations are logged with audit details, validated securely, and permission checks applied to ensure authorized access."
  ],
  "validation_criteria": [
    "All lead data inputs are validated against Zod schemas to ensure type correctness and required fields before API calls.",
    "API responses from LeadLovers must conform to expected schemas, verified via automated unit and integration tests.",
    "Error handling mechanisms must gracefully report issues and prevent invalid states or data corruption.",
    "Security configurations such as API tokens and environment variables must be correctly loaded and verified on server start-up.",
    "Compliance with coding standards ensured by linting and type-checking in the build process.",
    "Successful execution of defined test suites covering tools like create_lead, get_machines, get_machine_details, and get_email_sequences.",
    "Audit logs generated for every lead creation and CRM interaction for traceability.",
    "Permission checks must enforce granular access control as per project security principles."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Node.js",
      "Model Context Protocol (MCP)",
      "Zod",
      "Axios",
      "Jest"
    ],
    "features": [
      {
        "name": "create_lead",
        "description": "Creates a new lead in LeadLovers CRM with provided data including name, email, machine code, and optional fields like company, phone, etc.",
        "files": [
          "src/tools/leads/create-lead.ts",
          "src/schemas/leads.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Create Lead API",
            "version": "1.0.0"
          },
          "paths": {
            "/create_lead": {
              "post": {
                "summary": "Create a new lead",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "Name",
                          "Email",
                          "MachineCode",
                          "EmailSequenceCode",
                          "SequenceLevelCode"
                        ],
                        "properties": {
                          "Name": {
                            "type": "string",
                            "minLength": 2,
                            "maxLength": 100
                          },
                          "Email": {
                            "type": "string",
                            "format": "email",
                            "maxLength": 100
                          },
                          "MachineCode": {
                            "type": "string",
                            "maxLength": 100
                          },
                          "EmailSequenceCode": {
                            "type": "number",
                            "minimum": 0
                          },
                          "SequenceLevelCode": {
                            "type": "number",
                            "minimum": 0
                          },
                          "Company": {
                            "type": "string",
                            "maxLength": 100
                          },
                          "Phone": {
                            "type": "string",
                            "maxLength": 100
                          },
                          "Photo": {
                            "type": "string",
                            "maxLength": 100
                          },
                          "City": {
                            "type": "string",
                            "maxLength": 100
                          },
                          "State": {
                            "type": "string",
                            "maxLength": 100
                          },
                          "Birthday": {
                            "type": "string",
                            "maxLength": 100
                          },
                          "Gender": {
                            "type": "string",
                            "maxLength": 100
                          },
                          "Score": {
                            "type": "number",
                            "minimum": 0
                          },
                          "Tag": {
                            "type": "number",
                            "minimum": 0
                          },
                          "Source": {
                            "type": "string",
                            "maxLength": 100
                          },
                          "Message": {
                            "type": "string",
                            "maxLength": 100
                          },
                          "Notes": {
                            "type": "string",
                            "maxLength": 100
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Lead created successfully",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "content": {
                              "type": "array"
                            },
                            "isError": {
                              "type": "boolean"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "get_machines",
        "description": "Retrieves the list of available machines in the user's LeadLovers account with pagination support and optional details",
        "files": [
          "src/tools/machines/get-machines.ts",
          "src/schemas/machines.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Get Machines API",
            "version": "1.0.0"
          },
          "paths": {
            "/get_machines": {
              "get": {
                "summary": "Get list of machines",
                "parameters": [
                  {
                    "name": "page",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "registers",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "details",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "types",
                    "in": "query",
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "List of machines retrieved successfully",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "Items": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "MachineCode": {
                                    "type": "number"
                                  },
                                  "MachineName": {
                                    "type": "string"
                                  },
                                  "MachineImage": {
                                    "type": "string"
                                  },
                                  "Views": {
                                    "type": "number"
                                  },
                                  "Leads": {
                                    "type": "number"
                                  }
                                }
                              }
                            },
                            "CurrentPage": {
                              "type": "number"
                            },
                            "Registers": {
                              "type": "number"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "get_machine_details",
        "description": "Retrieves detailed information about a specific machine in the user's LeadLovers account using the machine code",
        "files": [
          "src/tools/machines/get-machine-details.ts",
          "src/schemas/machines.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Get Machine Details API",
            "version": "1.0.0"
          },
          "paths": {
            "/get_machine_details": {
              "get": {
                "summary": "Get details of a specific machine",
                "parameters": [
                  {
                    "name": "machineCode",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "number"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Machine details retrieved successfully",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "Items": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "MachineCode": {
                                    "type": "number"
                                  },
                                  "MachineName": {
                                    "type": "string"
                                  },
                                  "MachineImage": {
                                    "type": "string"
                                  },
                                  "Views": {
                                    "type": "number"
                                  },
                                  "Leads": {
                                    "type": "number"
                                  }
                                }
                              }
                            },
                            "CurrentPage": {
                              "type": "number"
                            },
                            "Registers": {
                              "type": "number"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "get_email_sequences",
        "description": "Retrieves the list of email sequences available for a specific machine in the user's LeadLovers account",
        "files": [
          "src/tools/email-sequence/get-email-sequence.ts",
          "src/schemas/emailSequence.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Get Email Sequences API",
            "version": "1.0.0"
          },
          "paths": {
            "/get_email_sequences": {
              "get": {
                "summary": "Get email sequences for a machine",
                "parameters": [
                  {
                    "name": "machineCode",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "number"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Email sequences retrieved successfully",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "Items": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "SequenceCode": {
                                    "type": "number"
                                  },
                                  "SequenceName": {
                                    "type": "string"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
